{"version":3,"file":"js/966.a450ca37.js","mappings":"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","sources":["webpack://xytj/./src/components/categories/Categories.vue","webpack://xytj/src/components/categories/Categories.vue","webpack://xytj/./src/components/categories/Categories.vue?d5bf","webpack://xytj/./src/components/categories/Categories.vue?ffc2"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('MainVue',{attrs:{\"title\":\"商品管理\",\"title2\":\"商品管理\"}},[_c('el-input',{attrs:{\"slot\":\"input\",\"placeholder\":\"Search Filter...\",\"prefix-icon\":\"el-icon-search\",\"clearable\":\"\"},on:{\"clear\":_vm.getList},slot:\"input\",model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}}),_c('div',{staticClass:\"button_add\",attrs:{\"slot\":\"add\"},on:{\"click\":function($event){_vm.addDialogVisible = true}},slot:\"add\"},[_c('img',{attrs:{\"src\":require(\"@/assets/imgs/button_add.png\"),\"alt\":\"\"}})]),_c('template',{slot:\"table\"},[_c('el-table',{attrs:{\"data\":_vm.list,\"stripe\":\"\",\"header-cell-style\":{ textAlign: 'center' },\"cell-style\":{ 'text-align': 'center' }}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"price\",\"label\":\"价格(元)\"}}),_c('el-table-column',{attrs:{\"prop\":\"carbonIntegral\",\"label\":\"所需碳积分\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"描述\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-text\":\"启用\"},on:{\"change\":function($event){return _vm.stateChanged(scope.row)}},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editInfo(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.deleteCate}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.page,\"page-sizes\":[5, 10, 15],\"page-size\":_vm.queryInfo.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],2),_c('el-drawer',{ref:\"addDialogRef\",attrs:{\"title\":\"填写商品信息\",\"before-close\":_vm.handleClose,\"visible\":_vm.addDialogVisible,\"direction\":\"rtl\",\"size\":\"40%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-card',[_c('div',{staticClass:\"demo-drawer__content\"},[_c('el-steps',{attrs:{\"active\":_vm.activeIndex - '0',\"finish-status\":\"success\",\"align-center\":\"\"}},[_c('el-step',{attrs:{\"title\":\"基本信息\"}}),_c('el-step',{attrs:{\"title\":\"商品图片\"}}),_c('el-step',{attrs:{\"title\":\"商品描述\"}}),_c('el-step',{attrs:{\"title\":\"完成\"}})],1),_c('el-form',{ref:\"addFormRef\",attrs:{\"rules\":_vm.addFormRules,\"model\":_vm.addForm,\"label-width\":\"100px\",\"label-position\":\"top\",\"id\":\"addForm\"}},[_c('el-tabs',{attrs:{\"tab-position\":\"left\",\"before-leave\":_vm.beforeTabLeave},model:{value:(_vm.activeIndex),callback:function ($$v) {_vm.activeIndex=$$v},expression:\"activeIndex\"}},[_c('el-tab-pane',{attrs:{\"label\":\"基本信息\",\"name\":\"0\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.addForm.name),callback:function ($$v) {_vm.$set(_vm.addForm, \"name\", $$v)},expression:\"addForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品价格(元)\",\"prop\":\"price\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addForm.price),callback:function ($$v) {_vm.$set(_vm.addForm, \"price\", $$v)},expression:\"addForm.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"碳积分\",\"prop\":\"carbonIntegral\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addForm.carbonIntegral),callback:function ($$v) {_vm.$set(_vm.addForm, \"carbonIntegral\", $$v)},expression:\"addForm.carbonIntegral\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品图片\",\"name\":\"1\"}},[_c('el-upload',{attrs:{\"limit\":1,\"action\":this.$http.defaults.baseURL + '/common/upload',\"on-remove\":(file) => {\n                  _vm.addForm.image = '';\n                },\"list-type\":\"picture\",\"on-success\":_vm.handleSuccess}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品内容\",\"name\":\"2\"}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addForm.description),expression:\"addForm.description\"}],attrs:{\"maxlength\":\"20\",\"cols\":\"60\",\"rows\":\"10\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.addForm.description)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.addForm, \"description\", $event.target.value)}}}),_c('el-button',{staticClass:\"btnAdd\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"添加商品\")])],1)],1)],1)],1)])],1),_c('el-dialog',{attrs:{\"title\":\"修改信息\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.editFormClosed}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"label-position\":\"left\",\"model\":_vm.editForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.editForm.name),callback:function ($$v) {_vm.$set(_vm.editForm, \"name\", $$v)},expression:\"editForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"碳积分\",\"prop\":\"carbonIntegral\"}},[_c('el-input',{model:{value:(_vm.editForm.carbonIntegral),callback:function ($$v) {_vm.$set(_vm.editForm, \"carbonIntegral\", $$v)},expression:\"editForm.carbonIntegral\"}})],1),_c('el-form-item',{attrs:{\"label\":\"价格\",\"prop\":\"price\"}},[_c('el-input',{model:{value:(_vm.editForm.price),callback:function ($$v) {_vm.$set(_vm.editForm, \"price\", $$v)},expression:\"editForm.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.editForm.description),callback:function ($$v) {_vm.$set(_vm.editForm, \"description\", $$v)},expression:\"editForm.description\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateEdit}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <MainVue title=\"商品管理\" title2=\"商品管理\">\r\n      <el-input placeholder=\"Search Filter...\" v-model=\"queryInfo.query\" prefix-icon=\"el-icon-search\" clearable\r\n        @clear=\"getList\" slot=\"input\">\r\n      </el-input>\r\n      <div slot=\"add\" class=\"button_add\" @click=\"addDialogVisible = true\">\r\n        <img src=\"@/assets/imgs/button_add.png\" alt=\"\">\r\n      </div>\r\n      <template slot=\"table\">\r\n        <el-table :data=\"list\" stripe :header-cell-style=\"{ textAlign: 'center' }\"\r\n          :cell-style=\"{ 'text-align': 'center' }\">\r\n          <el-table-column type=\"index\"> </el-table-column>\r\n\r\n          <el-table-column prop=\"name\" label=\"名称\"> </el-table-column>\r\n          <el-table-column prop=\"price\" label=\"价格(元)\"> </el-table-column>\r\n          <el-table-column prop=\"carbonIntegral\" label=\"所需碳积分\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"description\" label=\"描述\"> </el-table-column>\r\n          <el-table-column label=\"状态\">\r\n            <template slot-scope=\"scope\">\r\n              <el-switch active-text=\"启用\" v-model=\"scope.row.status\" @change=\"stateChanged(scope.row)\"></el-switch>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"primary\" size=\"mini\" @click=\"editInfo(scope.row)\">编辑</el-button>\r\n              <el-button type=\"primary\" size=\"mini\" @click=\"deleteCate\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div class=\"pagination\">\r\n          <!-- 分页功能 -->\r\n          <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n            :current-page=\"queryInfo.page\" :page-sizes=\"[5, 10, 15]\" :page-size=\"queryInfo.pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n          </el-pagination>\r\n        </div>\r\n\r\n      </template>\r\n    </MainVue>\r\n    <el-drawer title=\"填写商品信息\" :before-close=\"handleClose\" :visible.sync=\"addDialogVisible\" direction=\"rtl\"\r\n      ref=\"addDialogRef\" size=\"40%\">\r\n      <el-card>\r\n        <div class=\"demo-drawer__content\">\r\n          <!-- 进度条区域 -->\r\n          <el-steps :active=\"activeIndex - '0'\" finish-status=\"success\" align-center>\r\n            <el-step title=\"基本信息\"></el-step>\r\n            <el-step title=\"商品图片\"></el-step>\r\n            <el-step title=\"商品描述\"></el-step>\r\n            <el-step title=\"完成\"></el-step>\r\n          </el-steps>\r\n\r\n          <!-- tab栏 -->\r\n          <el-form ref=\"addFormRef\" :rules=\"addFormRules\" :model=\"addForm\" label-width=\"100px\" label-position=\"top\"\r\n            id=\"addForm\">\r\n            <el-tabs tab-position=\"left\" v-model=\"activeIndex\" :before-leave=\"beforeTabLeave\">\r\n              <el-tab-pane label=\"基本信息\" name=\"0\">\r\n                <el-form-item label=\"商品名称\" prop=\"name\">\r\n                  <el-input v-model=\"addForm.name\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"商品价格(元)\" prop=\"price\">\r\n                  <el-input v-model=\"addForm.price\" type=\"number\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"碳积分\" prop=\"carbonIntegral\">\r\n                  <el-input v-model=\"addForm.carbonIntegral\" type=\"number\"></el-input>\r\n                </el-form-item>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"商品图片\" name=\"1\">\r\n                <el-upload :limit=\"1\" :action=\"this.$http.defaults.baseURL + '/common/upload'\" :on-remove=\"\r\n                  (file) => {\r\n                    addForm.image = '';\r\n                  }\r\n                \" list-type=\"picture\" :on-success=\"handleSuccess\">\r\n                  <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n                </el-upload>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"商品内容\" name=\"2\">\r\n                <textarea v-model=\"addForm.description\" maxlength=\"20\" cols=\"60\" rows=\"10\" autofocus></textarea>\r\n                <el-button type=\"primary\" @click=\"add\" class=\"btnAdd\">添加商品</el-button>\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n    </el-drawer>\r\n    <el-dialog title=\"修改信息\" :visible.sync=\"editDialogVisible\" width=\"50%\" @close=\"editFormClosed\">\r\n      <el-form label-position=\"left\" :model=\"editForm\" ref=\"editFormRef\" label-width=\"100px\">\r\n        <el-form-item label=\"商品名\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"碳积分\" prop=\"carbonIntegral\">\r\n          <el-input v-model=\"editForm.carbonIntegral\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" prop=\"price\">\r\n          <el-input v-model=\"editForm.price\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"商品描述\" prop=\"description\">\r\n          <el-input type=\"textarea\" v-model=\"editForm.description\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"updateEdit\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { addCommodity, getCommodityList, updateCommodity } from \"@/api\";\r\nimport MainVue from \"../common/Main.vue\";\r\nexport default {\r\n  components: {\r\n    MainVue\r\n  },\r\n  data() {\r\n    //校验规则\r\n    var checkPrice = (rule, value, callback) => {\r\n      const regPrice = /^\\+?[1-9]\\d*$/;\r\n      if (regPrice.test(value)) {\r\n        callback();\r\n      }\r\n      callback(new Error(\"不能为负数或0\"));\r\n    };\r\n    return {\r\n      // 查询所有商品的信息\r\n      queryInfo: {\r\n        name: \"\",\r\n        page: 1,\r\n        pageSize: 5,\r\n      },\r\n      total: 0,\r\n      editForm: {\r\n        id: \"\",\r\n        carbonIntegral: 0,\r\n        description: \"\",\r\n        image: \"\",\r\n        name: \"\",\r\n        price: 0,\r\n      },\r\n      // 更改商品的信息\r\n      cateInfo: {\r\n        carbonIntegral: \"\",\r\n        description: \"\",\r\n        image: \"\",\r\n        name: \"\",\r\n        price: \"\",\r\n        id: \"\",\r\n      },\r\n      //  新增商品的表单\r\n      addForm: {\r\n        carbonIntegral: \"\",\r\n        description: \"\",\r\n        image: \"\",\r\n        name: \"\",\r\n        price: \"\",\r\n      },\r\n      list: [],\r\n      addDialogVisible: false,\r\n      editDialogVisible: false,\r\n      activeIndex: \"0\",\r\n      addFormRules: {\r\n        name: [{ required: true, message: \"请填写商品名称\", trigger: \"blur\" }],\r\n        carbonIntegral: [\r\n          { required: true, message: \"请填写商品兑换积分\", trigger: \"blur\" },\r\n          {\r\n            validator: checkPrice,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        price: [\r\n          { required: true, message: \"请填写商品价格\", trigger: \"blur\" },\r\n          {\r\n            validator: checkPrice,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async getList() {\r\n      const res = await getCommodityList(this.queryInfo);\r\n      if (res.code === 0) return this.$message.error(\"获取商品列表失败\");\r\n      this.list = res.data.records;\r\n      for (let i of this.list) {\r\n        i.status = !!i.status;\r\n      }\r\n      this.total = res.data.total;\r\n    },\r\n    stateChanged(user) {\r\n      this.getCateForm(user);\r\n      this.updateCateForm(user);\r\n    },\r\n    editInfo(user) {\r\n      this.editForm.id = user.id;\r\n      this.editForm.name = user.name;\r\n      this.editForm.price = user.price;\r\n      this.editForm.image = user.image;\r\n      this.editForm.description = user.description;\r\n      this.editForm.carbonIntegral = user.carbonIntegral;\r\n      this.editDialogVisible = true;\r\n    },\r\n    getCateForm(user) {\r\n      const { carbonIntegral, description, image, name, price, id } = user;\r\n      this.cateInfo = { carbonIntegral, description, image, name, price, id };\r\n    },\r\n    // 提交修改\r\n    async updateCateForm() {\r\n      const res = await updateCommodity(this.cateInfo);\r\n      if (res.code === 0) return this.$message.error(\"服务器错误，修改失败\");\r\n      this.$message.success(\"修改成功\");\r\n    },\r\n    // 删除功能\r\n    deleteCate() {\r\n      this.$message.info(\"还没写\");\r\n    },\r\n    // 添加对话关闭\r\n    handleClose() {\r\n      this.$refs.addFormRef.resetFields();\r\n      this.addDialogVisible = false;\r\n    },\r\n    submitAdd() { },\r\n    cancelForm() {\r\n      clearTimeout(this.timer);\r\n    },\r\n    // 上传成功\r\n    handleSuccess(response) {\r\n      this.addForm.image = response.data;\r\n    },\r\n    // 标签切换\r\n    beforeTabLeave(activeName, oldActiveName) {\r\n      if (oldActiveName === \"0\") {\r\n        let isvalid = false;\r\n        this.$refs.addFormRef.validate((valid) => {\r\n          isvalid = valid;\r\n        });\r\n        return isvalid;\r\n      }\r\n      if (oldActiveName === \"1\" && activeName === \"2\") {\r\n        if (this.addForm.image === \"\") {\r\n          this.$message.error(\"请先上传商品图片\");\r\n          return false;\r\n        }\r\n      }\r\n    },\r\n    // 添加按钮的功能\r\n    async add() {\r\n      const res = await addCommodity(this.addForm);\r\n      if (res.code === 0) return this.$message.error(\"新增失败\");\r\n      this.$message.success(\"新增商品成功\");\r\n      this.addDialogVisible = false;\r\n      this.getList();\r\n    },\r\n    //   当页面大小被修改\r\n    handleSizeChange(newPageSize) {\r\n      this.queryInfo.pageSize = newPageSize;\r\n      this.getList();\r\n    },\r\n    // 提交修改\r\n    async updateEditForm() {\r\n      const res = await updateCommodity(this.editForm);\r\n      console.log(res);\r\n      if (res.code === 0) return this.$message.error(\"修改失败\");\r\n      this.$message.success(\"修改成功\");\r\n      this.getList();\r\n    },\r\n    //   第几页变化了\r\n    handleCurrentChange(newPage) {\r\n      this.queryInfo.page = newPage;\r\n      this.getList();\r\n    },\r\n    // 编辑关闭\r\n    editFormClosed() {\r\n      this.$refs.editFormRef.resetFields();\r\n    },\r\n    // 点击确认\r\n    updateEdit() {\r\n      this.$refs.editFormRef.validate((valid) => {\r\n        if (!valid) return;\r\n        this.updateEditForm();\r\n        this.editDialogVisible = false;\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.el-tabs--left,\r\n.el-tabs--right {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-tabs--left .el-tabs__header.is-left {\r\n  margin-right: 46px !important;\r\n  margin-top: 17px !important;\r\n  margin-left: 20px !important;\r\n}\r\n\r\n.demo-drawer__content {\r\n  margin-top: 20px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+thread-loader@3.0.4_webpack@5.75.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.3.0_@babel+core@7.21.0_webpack@5.75.0/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.10.1_css-loader@6.7.3_vue-template-compiler@2.7.14_webpack@5.75.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+thread-loader@3.0.4_webpack@5.75.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.3.0_@babel+core@7.21.0_webpack@5.75.0/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.10.1_css-loader@6.7.3_vue-template-compiler@2.7.14_webpack@5.75.0/node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Categories.vue?vue&type=template&id=5842259b&scoped=true&\"\nimport script from \"./Categories.vue?vue&type=script&lang=js&\"\nexport * from \"./Categories.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Categories.vue?vue&type=style&index=0&id=5842259b&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.10.1_css-loader@6.7.3_vue-template-compiler@2.7.14_webpack@5.75.0/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5842259b\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","getList","slot","model","value","queryInfo","query","callback","$$v","$set","expression","staticClass","$event","addDialogVisible","require","list","textAlign","scopedSlots","_u","key","fn","scope","stateChanged","row","status","editInfo","_v","deleteCate","page","pageSize","total","handleSizeChange","handleCurrentChange","ref","handleClose","activeIndex","addFormRules","addForm","beforeTabLeave","name","price","carbonIntegral","$http","defaults","baseURL","file","image","handleSuccess","directives","rawName","description","domProps","target","composing","add","editDialogVisible","editFormClosed","editForm","updateEdit","staticRenderFns","components","MainVue","data","checkPrice","rule","regPrice","test","Error","id","cateInfo","required","message","trigger","validator","methods","res","getCommodityList","code","$message","error","records","i","user","getCateForm","updateCateForm","updateCommodity","success","info","$refs","addFormRef","resetFields","submitAdd","cancelForm","clearTimeout","timer","response","activeName","oldActiveName","isvalid","validate","valid","addCommodity","newPageSize","console","log","newPage","editFormRef","updateEditForm","created","component"],"sourceRoot":""}