"use strict";(self["webpackChunkxytj"]=self["webpackChunkxytj"]||[]).push([[458],{4458:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("账户管理")]),t("el-breadcrumb-item",[e._v("用户管理")])],1),t("el-card",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8,offset:0}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getList},slot:"append"})],1)],1)],1),t("el-table",{attrs:{data:e.list,stripe:"",border:"","header-cell-style":{textAlign:"center"},"cell-style":{"text-align":"center"}}},[t("el-table-column",{attrs:{type:"index"}}),t("el-table-column",{attrs:{prop:"nickName",label:"账户昵称",width:"200"}}),t("el-table-column",{attrs:{prop:"phone",width:"200",label:"手机号"}}),t("el-table-column",{attrs:{label:"性别",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"===t.row.sex?"男":"女")+" ")]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t("el-table-column",{attrs:{prop:"updateTime",label:"最近更新时间"}}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{attrs:{"active-text":"启用"},on:{change:function(t){return e.stateChanged(s.row)}},model:{value:s.row.status,callback:function(t){e.$set(s.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.resetToZero(s.row)}}},[e._v("积分清零")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.deleteUser}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.page,"page-sizes":[5,10,15],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},a=[],i=s(3834),n={data(){var e=(e,t,s)=>{const r=/^(?:(?:\+|00)86)?1(?:(?:3[\d])|(?:4[5-79])|(?:5[0-35-9])|(?:6[5-7])|(?:7[0-8])|(?:8[\d])|(?:9[1589]))\d{8}$/;r.test(t)&&s(),s(new Error("请输入合法手机号码"))};return{queryInfo:{name:"",page:1,pageSize:5},total:1,list:[],editDialogVisible:!1,userForm:{id:"",name:"",username:"",password:"",phone:"",sex:"",idNUmber:"",status:""},editForm:{username:"",password:"",sex:""},editFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]}}},methods:{async getList(){const e=await(0,i.lE)(this.queryInfo);if(0===e.code)return this.$message.error(e.msg);this.list=e.data.records;for(let t of this.list)t.status=!!t.status;this.total=e.data.total},async stateChanged(e){this.getEditForm(e),this.updateEditForm()},editInfo(e){this.editDialogVisible=!0,this.getEditForm(e),this.editForm=this.userForm},editFormClosed(){this.$refs.editFormRef.resetFields()},updateEdit(){this.$refs.editFormRef.validate((e=>{e&&(this.updateEditForm(),this.editDialogVisible=!1)}))},getEditForm(e){const{id:t,name:s,username:r,password:a,phone:i,sex:n,idNUmber:l,status:o}=e;this.userForm={id:t,name:s,username:r,password:a,phone:i,sex:n,idNUmber:l,status:o}},async updateEditForm(){const e=await(0,i.qX)(this.userForm);console.log(e),this.$message.success("修改成功"),this.getList()},deleteUser(){this.$message.info("暂时没搞")},handleSizeChange(e){this.queryInfo.pageSize=e,this.getList()},handleCurrentChange(e){this.queryInfo.page=e,this.getList()},async resetToZero(e){this.$confirm("此操作将清空用户积分, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((async()=>{await(0,i.ux)(e.id);this.$message({type:"success",message:"积分清零成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消操作"})}))}},created(){this.getList()}},l=n,o=s(5395),u=(0,o.Z)(l,r,a,!1,null,"34c0155a",null),c=u.exports}}]);
//# sourceMappingURL=458.4b20951d.js.map